<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pixel Whisperer</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/x-icon" href="img/favicon.ico" />
</head>
<body onload="init()">
  <div class="container-fluid">
    <h1 id="page-heading" class="text-center">Pixel Whisperer - Turn colours into words.</h1>

    <div class="row g-3">

      <!-- Left: Image area -->
      <div class="col-12 col-lg-6">
        <div class="border rounded p-2 border-3">
          <p id="pic-caption" class="text-center">
            Mouse over the image below to see hex code and closest colour name.
          </p>

          <!-- Image Box -->
          <div id="img-box" class="position-relative border">
            <div id="image-fence" class="overflow-auto">
              <div id="picture-frame">
                <img id="picker-image" src="img/Ducklings right.jpg" />
                <img id="original-image" src="img/Ducklings right.jpg" style="display:none;" />
              </div>
              <div id="horizontal-line" class="crosshair-line"></div>
              <div id="vertical-line" class="crosshair-line"></div>
            </div>
          </div>

          <!-- Arrow Pad -->
          <div class="my-3 text-center" id="arrowpad">
            <div class="d-inline-grid" style="grid-template-columns: auto auto auto auto auto; gap: 0.25rem;">
              <div></div>
              <div></div>
              <button class="btn btn-outline-secondary btn-sm" id="fast-up">↑↑</button>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <button class="btn btn-outline-secondary btn-sm" id="up">↑</button>
              <div></div>
              <div></div>
              <button class="btn btn-outline-secondary btn-sm" id="fast-left">←←</button>
              <button class="btn btn-outline-secondary btn-sm" id="left">←</button>
              <div></div>
              <button class="btn btn-outline-secondary btn-sm" id="right">→</button>
              <button class="btn btn-outline-secondary btn-sm" id="fast-right">→→</button>
              <div></div>
              <div></div>
              <button class="btn btn-outline-secondary btn-sm" id="down">↓</button>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <button class="btn btn-outline-secondary btn-sm" id="fast-down">↓↓</button>
              <div></div>
              <div></div>
              
            </div>
          </div>


          <!-- Brightness Controls -->
          <div class="mb-3 debug">
            <label class="form-label">Brightness</label>
            <div class="d-flex align-items-center">
              <input type="range" min="1" max="100" value="50" class="form-range me-2 flex-grow-1" id="brightness">
              <button type="button" class="btn btn-outline-secondary btn-sm" id="brightness-reset">Reset</button>
            </div>
          </div>

          <!-- Contrast Controls -->
          <div class="mb-3 debug">
            <label class="form-label">Contrast</label>
            <div class="d-flex align-items-center">
              <input type="range" min="1" max="100" value="50" class="form-range me-2 flex-grow-1" id="contrast">
              <button type="button" class="btn btn-outline-secondary btn-sm" id="contrast-reset">Reset</button>
            </div>
          </div>


          <!-- Zoom Controls -->
          <fieldset class="mb-3 debug">
            <legend class="form-label mb-1">Zoom</legend>
            <div class="d-flex flex-wrap gap-2">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="zoom" id="zoom-inv4" value="0.25" checked>
                <label class="form-check-label" for="zoom-inv4">x1/4</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="zoom" id="zoom-inv2" value="0.5">
                <label class="form-check-label" for="zoom-inv2">x1/2</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="zoom" id="zoom-1" value="1">
                <label class="form-check-label" for="zoom-1">x1</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="zoom" id="zoom-2" value="2">
                <label class="form-check-label" for="zoom-2">x2</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="zoom" id="zoom-5" value="5">
                <label class="form-check-label" for="zoom-5">x5</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="zoom" id="zoom-10" value="10">
                <label class="form-check-label" for="zoom-10">x10</label>
              </div>
            </div>
          </fieldset>

        </div>
      </div>

      <!-- Middle: Colour Info -->
      <div class="col-8 col-md-4 col-lg-2 mx-auto">
        <div class="border rounded p-2 border-3">
          <h3 class="text-center">Colour Info</h3>
          <h4>Closest colour name</h4>
          <p id="colour-name">&nbsp;</p>
          <h4>Hex code</h4>
          <p id="colour-hex">&nbsp;</p>
          <h4>RGB values</h4>
          <div class="rgb-bar mb-1">
            <div id="red-amount" class="rgb-amount" style="background-color:red;"></div>
          </div>
          <div class="rgb-bar mb-1">
            <div id="green-amount" class="rgb-amount" style="background-color:green;"></div>
          </div>
          <div class="rgb-bar mb-1">
            <div id="blue-amount" class="rgb-amount" style="background-color:blue;"></div>
          </div>
          <h4>Magnifying glass</h4>
          <div id="mag-glass" class="border"></div>
          <input type="range" min="1" max="15" value="11" class="form-range my-2" id="mag-res">
          <p id="pixel-xy">0 right, 0 down</p>
        </div>
      </div>

      <!-- Right: Selected Pixels -->
      <div class="col-8 col-md-4 col-lg-2 text-center mx-auto">
        <div class="border rounded p-2 border-3 text-center">
          <h3 class="text-center">Selected Pixels</h3>
          <ol id="pixel-list" class="overflow-auto" style="max-height:60vh;"></ol>
          <div class="d-flex gap-2 mt-2 text-center">
            <button id="copy-button" class="btn btn-primary btn-sm">Copy</button>
            <button id="export-button" class="btn btn-secondary btn-sm">Export</button>
            <button id="clear-button" class="btn btn-danger btn-sm">Clear</button>
          </div>
        </div>
      </div>

      <!-- Image Upload -->
      <div class="col-4 col-lg-1 text-center mx-auto">
        <div class="border rounded p-2 border-3">
          <h3 class="text-center">Change Image</h3>

          <!-- Hidden file input -->
          <input type="file" id="image-upload-button" accept="image/*" class="d-none" />

          <!-- Custom label styled as button -->
          <label for="image-upload-button" class="btn btn-outline-primary btn-sm mb-2">Upload</label>

          <button id="camera-button" class="btn btn-outline-primary btn-sm mb-1">Take Photo</button>
          <button id="camera-close-button" class="btn btn-outline-secondary btn-sm mb-1" style="display: none;">Close Camera</button>
          <video id="camera-preview" class="w-100" autoplay></video>
        </div>
      </div>


    </div>
  </div>

  <footer class="text-center small py-2">
    <p>
      Copyright <script>document.write(new Date().getFullYear());</script> Rhys Fenwick.
      Created at <a href="https://anu.edu.au">ANU</a>.
      Code at <a href="https://github.com/RhysFenwick/PixelWhisperer">GitHub</a> under
      <a href="https://opensource.org/license/mit">MIT Licence</a>.
      <input type="checkbox" id="elab-mode" class="form-check-input">
      <label for="elab-mode" class="form-check-label">ELab Mode</label>
    </p>
  </footer>

  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
